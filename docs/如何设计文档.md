# 技术文档

为何难写？

- 没有规范可依
- 不常写

如何写，技巧？

- 随性一些，解释一下如何做，即可
- 可以先尝试写一部份代码，捋一捋思路，再来写文档【注意】这里写代码纯是为了捋思路、为了写文档、搞清楚目的

写文档是浪费时间吗？

- 如果真的想明白了，最多浪费1-2h时间，不会导致项目延期
- 如果写不出来，说明没有想明白，正好暴露了问题

## 整体架构设计

- 需求【文档地址】
- 范围：整体设计、架构设计，无细节
- 模块设计：模块的拆分和关系图；模块的关键功能，职责等
- 特殊模块，重点说明
  - 组件库，独立第三方，同时用于编辑器和H5
  - 自研统计服务，为何自研

- 作品的数据结构：vuex store的结构，解释，数据流转关系图
- 扩展性保证：扩展组件；数据结构层面；扩展编辑器的功能，如：组件隐藏、锁定`vnode`；扩展页面的配置（讨论，集思广益）
- 开发提效：脚手架；组件平台
- 运维保障：线上服务和运维服务；安全；监控和报警；服务扩展性：流量大

## 脚手架

- 提升研发效能

  ![image-20230116145211802](/Users/vunboyao/Desktop/GitHub/readBook/docs/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3.assets/image-20230116145211802.png)

  ![image-20230116145501741](/Users/vunboyao/Desktop/GitHub/readBook/docs/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3.assets/image-20230116145501741-3852106.png)

  ![image-20230116151505519](/Users/vunboyao/Desktop/GitHub/readBook/docs/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3.assets/image-20230116151505519-3853307.png)

- 使用的角度：理解什么是脚手架

- 脚手架的实现原理

  - 为什么全局安装`@vue/cli`后会添加的命令为`vue`？
    - 全局安装完成后，会优先解析`package.json`中的`bin`对象，这里存储了环境变量相关的信息，`@vue/cli`中用`vue`指向了`bin/vue.js`

  - 全局安装`@vue/cli`时发生了什么？
    - 依赖安装，解析`package.json`中`bin`对象，生成环境变量的软链接
  - 执行`vue`命令时发生了什么？为什么`vue`指向一个`js`文件，我们却可以通过`vue`命令去执行它？
    - `vue.js`文件中，声明了`#!/usr/bin/env node`，指明了通过环境变量中的`node`来执行代码
  - 为什么说脚手架本质是操作系统的客户端？它和我们在PC上安装的应用/软件有什么区别？
    - 因为脚手架本身是通过`node`去执行，我们编写的代码，只是一个`js`文件，这里的客户端指的是`node`。和其他的应用/软件没有区别，只是没有GUI界面而已。`windows`下是`node.exe`，而`mac`下是一个可执行文件

  - 脚手架的执行过程

    ![image-20230116160744754](/Users/vunboyao/Desktop/GitHub/readBook/docs/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3.assets/image-20230116160744754-3856465.png)

- 脚手架的开发流程

![image-20230116232043376](/Users/vunboyao/Desktop/GitHub/readBook/docs/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3.assets/image-20230116232043376-3882444.png)
