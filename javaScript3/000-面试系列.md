# Jsonp实现

```js
function myJsonp(options = {}) {
  let url = options.url;
  // 1.1 check Jsonp Key
  if (options.jsonp) {
    url += '?' + options.jsonp + '='
  } else {
    url += '?callback=';
  }

  // 1.2 Jsonp Name
  let callBackName = ('jQuery' + Math.random()).replace('.', '');
  if (options.jsonpCallback) {
    callBackName = options.jsonpCallback;
    url += options.jsonpCallback;
  } else {
    url += callBackName;
  }

  // 1.3 Jsonp Data
  if (options.data) {
    let str = obj2str(options.data);
    url += '&' + str;
  }

  // 2.Get Cross Data
  let oScript = document.createElement('script');
  oScript.src = url;
  document.body.appendChild(oScript);

  // 3.Define callBack()
  window[callBackName] = function (data) {
    // return data
    options.success(data);
    // removeScriptTag
    document.body.removeChild(oScript);
  }
}

function obj2str(obj) {
  // random str => cache
  obj.t = (Math.random() + '').replace('.', '');
  let arr = [];
  for (let key in obj) {
    arr.push(key + '=' + encodeURIComponent(obj[key]));
  }
  let str = arr.join('&');
  return str;
}
````

# 程序

程序是指将 **编译型语言** 编写好的代码通过编译工具编译之后 **存储在硬盘** 上的一个 **二进制文件**，会占用磁盘空间，但不会占用系统资源

# 进程

进程是指 **程序** 在操作系统中的一次执行过程，是系统进行资源分配和调度的基本单位

# 线程

**线程** 是指 **进程** 中的一个执行实例，是程序执行的最小单元，它是比进行更小的能独立运行的基本单位

- 一个进程至少有一个线程，这个线程称为 **主线程**
- 除了主线程，还可以创建和销毁多个线程

# 串行

同一个时刻，只有一条指令，在一个CPU上执行，后面的指令必须等到前面指令执行完才能执行

# 并行

同一个时刻，多条指令，多个CPU上执行

# 事件循环

JS 中除了“事件绑定的函数” 和 “回调函数” 以外的都是同步代码

- 程序运行会从上到下依次执行所有的同步代码
- 执行过程中遇到异步代码会将异步代码放到事件循环中
- 当所有同步代码都执行完毕，JS 会不断检测事件循环中的异步代码是否满足条件
- 一旦满足条件就会执行满足条件的异步代码

